<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cajmen</title>
</head>

<body>
    <div class="row">
        {{> yield}}
    </div>
</body>

<template name="tables">
<div class="row">
  <h3 class="small-12 columns">Cajmen</h3>
  <div class="small-12 columns">
    <ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
        {{#each tables}}
            <li><a class="button" id="order">{{name}}</a></li>
        {{/each}}
    </ul>
  </div>
</div>
</template>

<template name="table">
<div class="row">
    <h3 class="small-12 columns">Table {{table.name}}</h3>
    <div class="small-12 columns">
        <a id="new" class="button">New order</a>
        <a id="remove" class="button secondary right">Remove table</a>
    </div>
    <div class="small-12 columns">
        <table class="small-12">
            {{#each orders}}
                <tr>
                    <td>
                        <a href="{{pathFor 'order'}}"><code>{{_id}}</code></a>
                    </td>
                    <td>
                        {{#if printed}}
                            <span class="label">printed</span>
                        {{else}}
                            <span class="success label">opened</span>
                        {{/if}}
                    </td>
                    <td>{{#if created}}{{moment created}}{{/if}}</td>
                    <td>
                        <button id="removeOrder" class="button alert tiny
                            postfix"><i class="fi-x"></i></button>
                    </td>
                </tr>
            {{/each}}
        </table>
    </div>
</div>
</template> 

<template name="order">
    <div class="row">
        <h3 class="small-6 columns">
            Order {{order.number}}
        </h3>
        <h3 class="small-6 columns text-right">
            Table {{table.name}}
        </h3>
    </div>
    {{#unless order.printed}}
        {{#each items}}
             <div class="row">
                <div class="small-8 columns">{{name}}</div>
                <div class="small-2 columns text-right">{{price}}</div>
                <div class="small-2 columns">
                    <button id="add" class="button success postfix">
                        <i class="fi-plus"></i>
                    </button>
                </div>
             </div>
        {{/each}}
    {{/unless}}
    <hr/>
    <div class="row">
        <div class="small-8 columns"><h4>Total</h4></div>
        <div class="small-4 columns text-right"><h4>{{sum}} {{order.currency}}</h4></div>
    </div>
    {{#each ordered}}
         <div class="row">
            <div class="small-8 columns">{{item.name}}
                {{#if item.flavours}}
                <small>
                {{#each item.flavours}} - {{.}}{{/each}}
                </small>
                {{/if}}
            </div>
            <div class="small-2 columns text-right">{{item.price}}</div>
            <div class="small-2 columns">
                {{#if printed}}
                    <button id="disabled" class="button disabled sucess postfix">
                        <i class="fi-print"></i>
                    </button>
                {{else}}
                    <button id="remove" class="button alert postfix">
                        <i class="fi-minus"></i>
                    </button>
                {{/if}}
            </div>
         </div>
    {{/each}}
    <div class="row">
        {{#if order.printed}}
        <div class="small-6 columns">
            <button id="ok" class="button">OK</button>
        </div>
        {{else}}
        <div class="small-6 columns">
            <button id="print" class="button" disabled={{order.printed}}>Print</button>
        </div>
        <div class="small-6 columns text-right">
            <button id="removeOrder" class="button">Cancel</button>
        </div>
        {{/if}}
    </div>
</template>


<template name="flavours">
<div class="row">
    <h3 class="small-12 columns">
        Order {{order.number}}
    </h3>
    <h4 class="small-12 columns">choose flavours of {{item.item.name}}</h4>
</div>
<div class="row">
    {{#each item.item.flavours}}
        <div class="small-12 columns" >
            <label><input type="checkbox" value="{{.}}"> {{.}}</label>
        </div>  
    {{/each}}
</div>
<div class="row">
    <div class="small-12 columns">
        <button id="ok" class="button">OK</button>
    </div>
</div>

</template>

<template name="admin">
<div class="row">
  <h3 class="small-12 columns">Admin</h3>
  <div class="small-12 columns">
    <ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
        {{#each tables}}
            <li><a class="button" href="{{pathFor 'table'}}">{{name}}</a></li>
        {{/each}}
    </ul>
  </div>
  </div>

  <div class="row">
    <div id="createtable" class="small-8 columns">
        <input type="text" id="table" placeholder="new table name" />
    </div>
    <div class="small-4 columns">
        <a class="button secondary postfix" id="addTable">Add table</a>
    </div>
    <div class="small-4 columns">
        <a class="button secondary postfix" href="{{pathFor 'items'}}">Items</a>
    </div>
  </div>
</template>

<template name="items">
    <div class="row">
        <h3 class="small-12 columns">Items</h3>
    </div>
    <div class="row">
        <div class="small-6 medium-3 columns">
            <label>Currency</label>
            <input type="text" id="currency" value="{{menu.currency}}">
        </div>
         <div class="small-6 medium-3 columns">
             <div class="row collapse">
                 <label>VAT</label>
                 <div class="small-9 columns"><input type="text" id="vat"
                     value={{menu.vat}}></div>
                 <div class="small-3 columns"><span class="postfix">%</span></div>
             </div>
        </div>
        <div class="small-6 medium-3 columns">
            <label>&nbsp;</label>
            <button class="button postfix" id="save">save</button>
        </div>
        <div class="small-6 medium-3 columns">
            <label>&nbsp;</label>
            <button class="button secondary postfix" id="clone">clone</button>
        </div>
   </div>
    <hr/>
    {{#each items}}
    <div class="row">
        <div class="small-7 columns">
            <a href={{pathFor 'item'}}>{{name}}</a>
            <small>
            {{#each flavours}}
                 - {{.}}
            {{/each}}
            </small>
        </div>
        <div class="small-3 columns text-right">{{price}}</div>
        <div class="small-2 columns">
            <button id="delete" class="button alert postfix"><i class="fi-x"></i></button>
        </div>
    </div>  
    {{/each}}
    <div id="additem" class="row">
        <div class="small-7 columns"><input type="text" id="name" placeholder="name" /></div>
        <div class="small-3 columns">
            <div class="row collapse">
                <div class="small-9 columns">
                    <input type="number" id="price" />
                </div>
                <div class="small-3 columns">
                    <span class="postfix">{{menu.currency}}</span>
                </div>
            </div>
        </div>
        <div class="small-2 columns">
            <button class="button postfix success" id="add"><i class="fi-plus"></i></button>
        </div>
    </div>  
</template>

<template name="item">
    <div class="row">
        <h3 class="small-12 columns">Flavours of {{name}}</h3>
    </div>
    <div class="row">
    <div class="small-12 columns">
    <ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
        {{#each flavours}}
            <li><a class="button small-8 secondary columns">{{.}}</a>
            <a class="button small-4 columns" id="remove">x</a></li>
        {{/each}}
    </ul>
  </div> 
  </div>
    <div class="row">
  <div class="small-12 columns">
    <div class="row collapse">
        <div class="small-8 columns"><input type="text" id="flavour"
            placeholder="flavour"></div>
        <div class="small-4 columns"><button id="add"
                class="button postfix">Add</button></div>
    </div>
</div>
</div>
</template>

<template name="stats">
{{#each items}}
<div class="row">
    {{_id}}
</div>
{{/each}}
</template>
